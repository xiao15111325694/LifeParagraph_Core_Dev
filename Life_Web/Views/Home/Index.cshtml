@using Life_Paragraph_Core
@{
    var dateTime = ViewBag.Time;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <script src="~/js/vue.js"></script>
    <script src="~/js/vue-router.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>
</head>
<body>
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
            <li data-target="#myCarousel" data-slide-to="3"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <img src="~/images/banner1.svg" alt="ASP.NET" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        Learn how to build ASP.NET apps that can run anywhere.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525028&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
            <div class="item">
                <img src="~/images/banner2.svg" alt="Visual Studio" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        There are powerful new features in Visual Studio for building modern web apps.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525030&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
            <div class="item">
                <img src="~/images/banner3.svg" alt="Package Management" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        Bring in libraries from NuGet and npm, and automate tasks using Grunt or Gulp.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525029&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
            <div class="item">
                <img src="~/images/banner4.svg" max-width="650" alt="Microsoft Azure" class="img-responsive" />
                <div class="carousel-caption" role="option">
                    <p>
                        Learn how Microsoft's Azure cloud platform allows you to build, deploy, and scale web apps.
                        <a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkID=525027&clcid=0x409">
                            Learn More
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default" style="margin-top:20px;">
                    <div class="panel-heading">
                        <h3 class="panel-title" style="font-weight:bold">扒拉新闻模块</h3>
                    </div>
                    <div id="vueApp1" class="panel-body">
                        <span v-for="x in NodesList">
                            <a :href="'/Paragraph/ShowParagraphIndex/' + x.id " style="margin-top:10px; margin-left:20px; border-radius:20px" class="btn-info btn-sm  btn">
                                {{x.nodeName}}&nbsp;<span class="badge">{{x.paragraphCount}}</span>
                            </a>
                        </span>
                    </div>
                </div>
            </div>
        </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default" style="margin-top:20px;">
                        <div class="panel-heading">
                            <h3 class="panel-title" style="font-weight:bold">扒拉游戏模块</h3>
                        </div>
                        <div id="appVueGameNode" class="panel-body">
                            <span v-for="x in GameNodes">
                                <a v-if="x.id==1" :href="'/GameStrategy/Index/' + x.id " style="margin-left:20px;border-radius:20px;" class="btn btn-info">{{x.gameTypeName}}</a>
                                <a v-if="x.id>1" :href="'/GameStrategy/GameIndex/' + x.id " style="margin-left:20px;border-radius:20px;" class="btn btn-info">{{x.gameTypeName}}</a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default" style="margin-top:20px;">
                    <div class="panel-heading">
                        <h3 class="panel-title" style="font-weight:bold">扒拉自创模块</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="height:20px"></div>
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-default" style="margin-top:20px;">
                    <div class="panel-heading">
                        <h3 class="panel-title" style="font-weight:bold">Life_主题</h3>
                    </div>
                 
                </div>
            </div>
            <div class="col-md-6">
                <div id="vueApp2"  class="panel panel-default" style="margin-top:20px;">
                    <div class="panel-heading">
                        <h3 class="panel-title" style="font-weight:bold">
                            Life新闻_最热最火 
                            <div style="margin-left:300px" class="btn-group">
                                <button type="button" class="btn btn-xs btn-success">今日推荐</button>
                                @*<button type="button" class="btn btn-xs btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">今日推介</a></li>
                                    <li><a href="#">本周推介</a></li>
                                    <li><a href="#">本月推介</a></li>
                                    <li><a href="#">点赞最多</a></li>
                                </ul>*@
                            </div>
                        </h3>
                    </div>
                    <div id="vueApp2" class="panel-body">
                        <ul>
                            <li v-for="x in paragraphLists" style="list-style-type:none;">
                                <p class="text-center text-info"><h3><a :href="'/Paragraph/ParagrapDetail/' + x.id ">{{x.title}}</a></h3><small>{{x.createTime}}</small></p>
                            </li>
                        </ul>
                        <div class="row">
                            <div class="col-md-1"></div>
                            <div class="col-md-11">
                                <ul class="pagination pagination-sm">
                                    <li class="page-item"><span v-if="curIndex==1" style="display:none" class="page-link" href="#">上一页</span></li>
                                    <li class="page-item"><span v-if="curIndex>1" v-on:click="curIndex--,pageClick()" class="page-link" href="#">上一页</span></li>
                                    <li v-for="index in pageCount" class="page-item">
                                      <span v-if="(curIndex>index-5)&&(curIndex<index+5)" class="page-link" v-on:click="curIndex=index,pageClick()" href="#">{{index}}</span>
                                    </li>
                                    <li class="page-item"><span class="page-link" v-on:click="curIndex++,pageClick()" href="#">下一页</span></li>
                                </ul>
                            </div>
                        </div>
                       <div class="row">
                           <div class="col-md-9"></div>
                           <div class="col-md-3">
                               <span class="btn btn-info" href="#">总条数{{total}}</span>
                           </div>
                       </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="panel panel-default" style="margin-top:20px;">
                    <div class="panel-heading">
                        <h3 class="panel-title" style="font-weight:bold">
                            Life_最热最火<div style="margin-left:40px" class="btn-group">
                                <button type="button" class="btn btn-xs btn-success">最热头条</button>
                            </div>
                        </h3>
                    </div>
                    <div id="vueApp3" class="panel-body">
                        
                        <ul class="list-unstyled" v-for="x in paragraphs">
                            <li style="list-style-type:none;">
                                <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap" class=" text-info"><a href="#" class="btn btn-info btn-xs"><span class="badge">☆{{x.thumbsupCount}}</span></a>&nbsp;<a  :href="'/Paragraph/ParagrapDetail/' + x.id ">{{x.title}}</a></p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="span12">
                <ul class="thumbnails">
                    <li class="span4">
                        <div class="thumbnail">
                            
                            <div class="caption">
                                <h3>
                                    冯诺尔曼结构
                                </h3>
                                <p>
                                    也称普林斯顿结构，是一种将程序指令存储器和数据存储器合并在一起的存储器结构。程序指令存储地址和数据存储地址指向同一个存储器的不同物理位置。
                                </p>
                                <p>
                                    <a class="btn btn-primary" href="#">浏览</a> <a class="btn" href="#">分享</a>
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="span4">
                        <div class="thumbnail">
                           
                            <div class="caption">
                                <h3>
                                    哈佛结构
                                </h3>
                                <p>
                                    哈佛结构是一种将程序指令存储和数据存储分开的存储器结构，它的主要特点是将程序和数据存储在不同的存储空间中，进行独立编址。
                                </p>
                                <p>
                                    <a class="btn btn-primary" href="#">浏览</a> <a class="btn" href="#">分享</a>
                                </p>
                            </div>
                        </div>
                    </li>
                    <li class="span4">
                        <div class="thumbnail">
             
                            <div class="caption">
                                <h3>
                                    改进型哈佛结构
                                </h3>
                                <p>
                                    改进型的哈佛结构具有一条独立的地址总线和一条独立的数据总线，两条总线由程序存储器和数据存储器分时复用，使结构更紧凑。
                                </p>
                                <p>
                                    <a class="btn btn-primary" href="#">浏览</a> <a class="btn" href="#">分享</a>
                                </p>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>

      



        var v = new Vue({
            el: "#vueApp1",
            data: {
                NodesList: ''
            },
            methods: {
                recommend: function () {
                    var _self = this;
                    $.ajax({
                        type: "get",
                        url: "api/Node/GetAllNodeName",
                        dataType: "json",
                        success: function (data) {
                            _self.NodesList = data;
                        }
                    });
                }
            }
        });
        v.recommend(); //加载事件

        var v1 = new Vue({
            el: "#vueApp2",
            data: {
                paragraphLists: '',
                pageCount: "",
                total: "",
                curIndex:"1"
            }, 
            methods: {
                recommend: function () {
                    var _self = this;
                    var EntityParam = { "Time": new Date().toLocaleDateString() };
                    $.ajax({
                        type: "get",
                        data: EntityParam,
                        url: "api/Paragrph/GetAll",
                        dataType: "json",
                        success: function (data) {
                            _self.paragraphLists = data.viewModel;
                            _self.total = data.total;
                            _self.pageCount = parseInt(data.total / 10);
                            
                        }
                    });
                },
                pageClick: function () {
                    var _self = this;
                    var EntityParam = { "Time": new Date().toLocaleDateString(), "PageIndex": _self.curIndex,"PageSize":"10"};
                    $.ajax({
                        type: "get",
                        data: EntityParam,
                        url: "api/Paragrph/GetAll",
                        dataType: "json",
                        success: function (data) {
                            _self.paragraphLists = data.viewModel;
                            _self.total = data.total;
                        }
                    });
                }
            }
        });

        v1.recommend();

        var v2 = new Vue({
            el: "#vueApp3",
            data: {
                paragraphs: ''
            },
            methods: {
                recommend: function () {
                    var _self = this;
                    $.ajax({
                        type: "get",
                        url: "api/Paragrph/MostThumbsupCount",
                        dataType: "json",
                        success: function (data) {
                            _self.paragraphs = data;
                        }
                    });
                }
            }
        });

        v2.recommend();

        var v2 = new Vue({
            el: "#appVueGameNode",
            data: {
                GameNodes: ''
            },
            methods: {
                recommend: function () {
                    var _self = this;
                    $.ajax({
                        type: "get",
                        url: "api/GameNode/Get",
                        dataType: "json",
                        success: function (data) {
                            _self.GameNodes = data;
                        }
                    });
                }
            }
        });

        v2.recommend();
    </script>
</body>
</html>